<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue Todo Tutorial</title>
    <link rel="stylesheet" type="text/css" href="style.css">
       
</head>
<body>
<div id="todo-app">
  <div>
    <input type="button" value="全部标为完成"/>
    <input
           type="text" 
           placeholder="添加 todo"
           v-model="newTodoTitle"
           @keyup.enter="addTodo"/>
  </div>
  <!-- todo list -->
  <ul>
    <li v-for="todo in todos" :key="todo.index">
      <span :class="{completed:todo.completed}"
            @dblclick="editTodo(todo)">{{todo.title}}</span>
      <input type="button" value="标为完成"@click="markAsCompleted(todo)">
      <input type="button" value="删除" @click="removeTodo(todo)">
      <input type="text" value="编辑 todo..."
             v-if="editedTodo!==null && editedTodo.id===todo.id"
             v-model="todo.title"
             @keyup.enter="editDone(todo)"
             @keyup.esc="cancelEdit(todo)"/>
    </li>
   
  </ul>
  <!-- end todo list -->
  <div>
    <span>剩余 3 项未完成 ---</span>
    <span>筛选：
      <input type="button" class="selected" value="全部">
      <input type="button" value="进行中">
      <input type="button" value="已完成">
      <input type="button" value="清除已完成">
      <input type="button" value="清除全部">
    </span>
  </div>
</div>

<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script>
    let id=0;
    var app = new Vue({
        el: '#todo-app',
        data: function () {
            return {
                todos:[],
                newTodoTitle:'', 
                editedTodo:null,//temperarily store todo before it is edited
                
                
            }
        },

        methods:{
          addTodo:function(){
              if(this.newTodoTitle.length){
                this.todos.push({id:id++,title:this.newTodoTitle,completed:false});
              this.newTodoTitle='' 
                 }         
              
          },
            markAsCompleted:function(todo){
               todo.completed=true 
            },
            removeTodo: function(todo){
                
                this.todos.splice(this.todos.indexOf(todo),1)
            },
            editTodo: function(todo){
                this.editedTodo={id:todo.id,title:todo.title}
            },
            editDone:function(todo){
                this.editedTodo=null;
                if(!this.todo)this.removeTodo(todo)//when todo is empty.remove it when user hit enter
            },
            cancelEdit:function(todo){
                todo.title=this.editedTodo.title;
                this.editedTodo=null
            }
            
        
        },
        computed:{
            }
    })
</script>
</body>
</html>